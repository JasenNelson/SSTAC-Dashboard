{
  "manifest_version": 1,
  "repo": {
    "name": "SSTAC-Dashboard",
    "workspace_root": "F:/SSTAC-Dashboard"
  },
  "policies": {
    "lifecycle_definitions": {
      "AUTHORITATIVE": "Must be kept correct; can be required by gates.",
      "REFERENCE": "Helpful but not canonical; must not claim global 'current project status' or repeat volatile metrics.",
      "HISTORICAL": "Snapshot; do not update except for minimal link repairs / disclaimers."
    },
    "current_status_claims_policy": {
      "canonical_entrypoint": "docs/INDEX.md",
      "rule": "Only docs/INDEX.md may claim global 'current project status' or host volatile metrics. Other docs must point to docs/INDEX.md and/or facts in this manifest."
    },
    "facts_policy": {
      "canonical_store": "docs/_meta/docs-manifest.json:facts",
      "ban_list": [
        "Do not hardcode volatile counts (e.g. tests: 122 vs 142) across multiple markdown files.",
        "Do not duplicate 'current grade' across multiple docs.",
        "If a metric is needed, store it here with provenance or derive it from commands/logs."
      ],
      "required_provenance_fields": [
        "source",
        "last_verified"
      ]
    },
    "archive_policy": {
      "rule": "Do not move/archive/delete docs until the archive investigation gates pass (link graph, duplication clusters, unique-value extraction, inbound reference checks)."
    },
    "gate_evaluation": {
      "path_normalization": {
        "replace_backslashes": true,
        "strip_leading_dot_slash": true,
        "case_sensitive_match": true
      },
      "heading_verification": {
        "heading_regex": "^#{1,6}\\s+(.+)$",
        "match_mode": "exact_heading_text_after_hashes"
      }
    }
  },
  "facts": {
    "session_2026_01_24": {
      "status": "completed",
      "work_summary": "Adapted /update-docs skill from Regulatory-Review project; created docs/LESSONS.md; documented native module pattern for multi-environment support",
      "created_files": [
        ".claude/skills/update-docs/SKILL.md",
        "docs/LESSONS.md",
        ".claude/SESSION_SUMMARY.md"
      ],
      "critical_lessons": 1,
      "deployment_insights": "Native modules require lazy loading + webpack externals for serverless compatibility",
      "multi_environment_support": "local (SQLite + full features) + serverless (graceful 503 fallback)",
      "last_verified": "2026-01-24"
    },
    "refactoring_2026_01_24_phase2": {
      "status": "completed",
      "phase": "Phase 2: Extract Data Fetching Layer",
      "work_summary": "Extracted data fetching logic from PollResultsClient into usePollData hook. Completed test-first extraction with comprehensive testing.",
      "component_before": "PollResultsClient.tsx: 1,898 lines",
      "component_after": "PollResultsClient.tsx: 1,178 lines",
      "lines_reduced": 720,
      "reduction_percentage": "38%",
      "extraction_target": "usePollData.ts hook",
      "tests_before": 142,
      "tests_after": 148,
      "tests_added": 6,
      "test_files_before": 10,
      "test_files_after": 11,
      "created_files": [
        "src/app/(dashboard)/admin/poll-results/hooks/usePollData.ts",
        "src/app/(dashboard)/admin/poll-results/hooks/__tests__/usePollData.test.ts"
      ],
      "commits": [
        "90e7404 - test: setup test infrastructure for PollResults refactoring",
        "51f59e4 - refactor: extract data fetching into usePollData hook (Phase 2)",
        "a7096b2 - chore: add permission for docs:gate verification"
      ],
      "grade_impact": "+0.5 points (A- target remains 90%+ for A)",
      "gate_status": "POLLING_GATE: PASS - No API changes, fully backward compatible",
      "functional_changes": "none - extracted code only moved to hook",
      "regressions": "0 - all tests pass",
      "build_status": "SUCCESS",
      "lessons_added": 1,
      "lesson_topic": "Incremental Component Extraction Pattern (test-first, 6-phase approach)",
      "next_phase": "Phase 3: Extract Results Display Logic (ResultsDisplay.tsx)",
      "last_verified": "2026-01-24"
    },
    "refactoring_2026_01_24_phase3": {
      "status": "completed",
      "phase": "Phase 3: Extract Results Display Logic",
      "work_summary": "Extracted all poll rendering logic (wordcloud, ranking, single-choice) into ResultsDisplay component. Significant reduction in main component size.",
      "component_before": "PollResultsClient.tsx: 1,178 lines, ResultsDisplay.tsx: new extraction target",
      "component_after": "PollResultsClient.tsx: 403 lines, ResultsDisplay.tsx: 1,084 lines",
      "lines_reduced": 775,
      "reduction_percentage": "66%",
      "tests_added": 23,
      "tests_total": 171,
      "created_files": [
        "src/app/(dashboard)/admin/poll-results/components/ResultsDisplay.tsx",
        "src/app/(dashboard)/admin/poll-results/components/__tests__/ResultsDisplay.test.tsx"
      ],
      "commits": ["5ca6a04 - refactor: extract poll results display logic into ResultsDisplay component (Phase 3)"],
      "gate_status": "POLLING_GATE: PASS",
      "regressions": "0 - all 171 tests pass",
      "last_verified": "2026-01-24"
    },
    "refactoring_2026_01_24_phase4": {
      "status": "completed",
      "phase": "Phase 4: Extract Matrix Graph Rendering",
      "work_summary": "Extracted prioritization and holistic matrix graph rendering into dedicated MatrixGraphRenderer component. Improved ResultsDisplay organization.",
      "component_before": "ResultsDisplay.tsx: 1,084 lines",
      "component_after": "ResultsDisplay.tsx: 902 lines, MatrixGraphRenderer.tsx: 155 lines",
      "lines_reduced": 182,
      "tests_added": 10,
      "tests_total": 181,
      "created_files": [
        "src/app/(dashboard)/admin/poll-results/components/MatrixGraphRenderer.tsx",
        "src/app/(dashboard)/admin/poll-results/components/__tests__/MatrixGraphRenderer.test.tsx"
      ],
      "commits": ["a9a2ada - refactor: extract matrix graph rendering into MatrixGraphRenderer component (Phase 4)"],
      "gate_status": "POLLING_GATE: PASS",
      "regressions": "0 - all 181 tests pass",
      "last_verified": "2026-01-24"
    },
    "refactoring_2026_01_24_phase5": {
      "status": "completed",
      "phase": "Phase 5: Extract UI State Management",
      "work_summary": "Extracted 11 UI state variables and toggle function into useResultsState hook. Centralized state management, improved PollResultsClient clarity.",
      "extraction_target": "useResultsState.ts hook",
      "hook_lines": 50,
      "tests_added": 12,
      "tests_total": 193,
      "created_files": [
        "src/app/(dashboard)/admin/poll-results/hooks/useResultsState.ts",
        "src/app/(dashboard)/admin/poll-results/hooks/__tests__/useResultsState.test.ts"
      ],
      "commits": ["594cb68 - refactor: extract UI state management into useResultsState hook (Phase 5)"],
      "gate_status": "POLLING_GATE: PASS",
      "regressions": "0 - all 193 tests pass",
      "last_verified": "2026-01-24"
    },
    "refactoring_2026_01_24_complete": {
      "status": "completed_all_phases",
      "phases_completed": "2-5 (Phase 1 baseline, Phase 6 verification)",
      "work_summary": "Complete incremental refactoring of PollResultsClient from 1,898-line monolithic component to focused, well-organized architecture with clear separation of concerns.",
      "total_lines_before": 1898,
      "total_extracted_files": 5,
      "extracted_components": {
        "usePollData": "323 lines (data fetching, Supabase queries)",
        "ResultsDisplay": "902 lines (poll rendering)",
        "MatrixGraphRenderer": "155 lines (matrix graphs)",
        "useResultsState": "50 lines (UI state)"
      },
      "pollresultsclient_final_lines": 403,
      "total_lines_now": 1833,
      "test_progression": {
        "baseline": 142,
        "phase2": 148,
        "phase3": 171,
        "phase4": 181,
        "phase5": 193
      },
      "tests_added_total": 51,
      "all_tests_passing": 193,
      "architecture_improvements": [
        "Separation of concerns: data, rendering, state all separated",
        "Reusable hooks for other components",
        "Each component/hook has single responsibility",
        "Clear prop interfaces and contracts",
        "Comprehensive test coverage"
      ],
      "quality_verification": {
        "typescript_errors": 0,
        "eslint_errors_in_new_files": 0,
        "production_build": "SUCCESS",
        "all_tests_passing": true,
        "gate_status": "POLLING_GATE: PASS"
      },
      "commits": [
        "90e7404 - Phase 1: test infrastructure",
        "51f59e4 - Phase 2: usePollData hook",
        "5ca6a04 - Phase 3: ResultsDisplay component",
        "a9a2ada - Phase 4: MatrixGraphRenderer component",
        "594cb68 - Phase 5: useResultsState hook"
      ],
      "lesson_captured": "docs/LESSONS.md - Incremental Component Extraction Pattern (HIGH impact)",
      "last_verified": "2026-01-24"
    },
    "grades": {
      "starting_grade": {
        "status": "verified",
        "value": "C (66%)",
        "source": "Initial project assessment (August 2025)",
        "last_verified": "2025-12-18"
      },
      "current_grade": {
        "status": "verified",
        "value": "A- (85-89%)",
        "source": "Achieved November 17, 2025 through TypeScript type safety improvements (commit d285cbd)",
        "last_verified": "2025-12-18"
      },
      "target_grade": {
        "status": "verified",
        "value": "A (90%+)",
        "source": "Updated November 17, 2025 after A- achievement",
        "last_verified": "2025-12-18"
      }
    },
    "testing": {
      "vitest_test_count": {
        "status": "verified",
        "value": 193,
        "source": "npm run test output - Phase 5 refactoring complete (2026-01-24)",
        "last_verified": "2026-01-24",
        "note": "Increased from 142 to 193 (+51 tests) through 4-phase incremental refactoring with comprehensive test coverage for extracted components and hooks"
      },
      "playwright_test_count": {
        "status": "verified",
        "value": 6,
        "source": "playwright test --list output (2025-12-18)",
        "last_verified": "2025-12-18"
      },
      "k6_script_count": {
        "status": "verified",
        "value": 6,
        "source": "tests/k6-*.js inventory (2025-12-18)",
        "last_verified": "2025-12-18"
      }
    }
  },
  "known_issues": {
    "broken_doc_links_detected": {
      "scan_scope": "docs/**",
      "broken_count": 0,
      "note": "Resolved: internal docs link scan currently reports 0 broken links."
    }
  },
  "documents": [
    {
      "id": "docs.index",
      "path": "docs/INDEX.md",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "docs-system"
      ],
      "notes": "Canonical docs entrypoint."
    },
    {
      "id": "docs.manifest",
      "path": "docs/_meta/docs-manifest.json",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "docs-system"
      ]
    },
    {
      "id": "core.agents",
      "path": "docs/AGENTS.md",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "safety",
        "architecture",
        "polling"
      ]
    },
    {
      "id": "docs.readme_legacy",
      "path": "docs/README.md",
      "lifecycle": "REFERENCE",
      "domain_tags": [
        "docs-system"
      ],
      "notes": "Legacy index; should point to docs/INDEX.md and avoid volatile metrics."
    },
    {
      "id": "ops.vercel_setup",
      "path": "docs/operations/VERCEL_SETUP.md",
      "lifecycle": "REFERENCE",
      "domain_tags": [
        "operations",
        "deployment",
        "vercel"
      ]
    },
    {
      "id": "ops.monitoring_guide",
      "path": "docs/operations/MONITORING_GUIDE.md",
      "lifecycle": "REFERENCE",
      "domain_tags": [
        "operations",
        "monitoring",
        "performance"
      ]
    },
    {
      "id": "core.project_status",
      "path": "docs/PROJECT_STATUS.md",
      "lifecycle": "REFERENCE",
      "domain_tags": [
        "status"
      ],
      "notes": "Must not be treated as canonical for volatile metrics once docs/INDEX.md exists."
    },
    {
      "id": "testing.index",
      "path": "docs/testing/README.md",
      "lifecycle": "REFERENCE",
      "domain_tags": [
        "testing"
      ]
    },
    {
      "id": "poll.complete_guide",
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "polling",
        "matrix-graphs"
      ]
    },
    {
      "id": "poll.safe_update_protocol",
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "polling",
        "operations"
      ]
    },
    {
      "id": "poll.debugging_guide",
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "polling",
        "debugging"
      ]
    },
    {
      "id": "poll.cew_data_flow",
      "path": "docs/poll-system/CEW_DATA_FLOW.md",
      "lifecycle": "AUTHORITATIVE",
      "domain_tags": [
        "polling",
        "cew",
        "data-flow"
      ]
    },
    {
      "id": "docs.lessons",
      "path": "docs/LESSONS.md",
      "lifecycle": "REFERENCE",
      "domain_tags": [
        "docs-system",
        "lessons",
        "patterns",
        "architecture"
      ],
      "notes": "Reusable lessons and patterns discovered during development; updated via /update-docs skill."
    },
    {
      "id": "archive.master_completion",
      "path": "docs/review-analysis/archive/MASTER_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Consolidated historical overview of all completion summaries."
    },
    {
      "id": "archive.phase3_completion",
      "path": "docs/review-analysis/archive/PHASE3_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary",
        "phase3"
      ],
      "notes": "Phase 3: Validation & Security completion summary (November 2025)."
    },
    {
      "id": "archive.week1_2_completion",
      "path": "docs/review-analysis/archive/WEEK1-2_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Testing infrastructure setup completion summary."
    },
    {
      "id": "archive.week3_4_completion",
      "path": "docs/review-analysis/archive/WEEK3-4_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Code cleanup completion summary."
    },
    {
      "id": "archive.week5_6_completion",
      "path": "docs/review-analysis/archive/WEEK5-6_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Utility extraction completion summary."
    },
    {
      "id": "archive.week9_utility_integration",
      "path": "docs/review-analysis/archive/WEEK9_UTILITY_INTEGRATION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Auth utility integration completion summary."
    },
    {
      "id": "archive.week9_10_testing_completion",
      "path": "docs/review-analysis/archive/WEEK9-10_TESTING_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary",
        "testing"
      ],
      "notes": "Testing completion summary."
    },
    {
      "id": "archive.week11_12_completion",
      "path": "docs/review-analysis/archive/WEEK11-12_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Supabase migration completion summary."
    },
    {
      "id": "archive.week13_16_completion",
      "path": "docs/review-analysis/archive/WEEK13-16_COMPLETION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "completion-summary"
      ],
      "notes": "Component planning completion summary."
    },
    {
      "id": "archive.lint_fixes_proposal",
      "path": "docs/review-analysis/archive/LINT_FIXES_PROPOSAL.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "linting"
      ]
    },
    {
      "id": "archive.npm_audit_findings",
      "path": "docs/review-analysis/archive/NPM_AUDIT_FINDINGS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "security"
      ]
    },
    {
      "id": "archive.monitoring_baseline",
      "path": "docs/review-analysis/archive/MONITORING_BASELINE.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "monitoring"
      ]
    },
    {
      "id": "archive.query_performance_status",
      "path": "docs/review-analysis/archive/QUERY_PERFORMANCE_TASKS_STATUS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "performance"
      ]
    },
    {
      "id": "archive.accessibility_improvements",
      "path": "docs/review-analysis/archive/TEST_RESULTS_ACCESSIBILITY_IMPROVEMENTS_2025-11-18.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "accessibility"
      ]
    },
    {
      "id": "archive.sprit4_review",
      "path": "docs/review-analysis/archive/SPRINT4_LAYOUT_AND_COMPONENT_REVIEW.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "refactoring"
      ]
    },
    {
      "id": "archive.phase2_matrix_graph_issue",
      "path": "docs/review-analysis/archive/PHASE2_MATRIX_GRAPH_ISSUE_RESOLUTION.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "matrix-graphs"
      ]
    },
    {
      "id": "archive.security_testing_plan",
      "path": "docs/review-analysis/archive/SECURITY_TESTING_PLAN.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "security"
      ]
    },
    {
      "id": "review.authorization",
      "path": "docs/review-analysis/archive/AUTHORIZATION_REVIEW.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "security",
        "authorization"
      ]
    },
    {
      "id": "review.phase3_testing_checklist",
      "path": "docs/review-analysis/archive/PHASE3_TESTING_CHECKLIST.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "testing"
      ]
    },
    {
      "id": "review.poll_export_plan",
      "path": "docs/review-analysis/archive/POLL_RESULTS_EXPORT_PLAN.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "polling"
      ]
    },
    {
      "id": "review.poll_safe_improvements",
      "path": "docs/review-analysis/archive/POLL_SAFE_IMPROVEMENTS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "polling",
        "safety"
      ]
    },
    {
      "id": "review.security_integration",
      "path": "docs/review-analysis/archive/SECURITY_INTEGRATION_SUMMARY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "security"
      ]
    },
    {
      "id": "review.supabase_auth_utility",
      "path": "docs/review-analysis/archive/SUPABASE_AUTH_UTILITY.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "supabase",
        "auth"
      ]
    },
    {
      "id": "review.battle_scars_10",
      "path": "docs/review-analysis/archive/TOP_10_BATTLE_SCARS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "retrospective"
      ]
    },
    {
      "id": "review.battle_scars_50",
      "path": "docs/review-analysis/archive/TOP_50_BATTLE_SCARS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "retrospective"
      ]
    },
    {
      "id": "review.verification_process",
      "path": "docs/review-analysis/archive/CODE_CHANGE_VERIFICATION_PROCESS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "process"
      ]
    },
    {
      "id": "review.current_status_nov",
      "path": "docs/review-analysis/archive/CURRENT_STATUS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "status"
      ]
    },
    {
      "id": "review.query_performance_nov",
      "path": "docs/review-analysis/archive/QUERY_PERFORMANCE_ANALYSIS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "performance"
      ]
    },
    {
      "id": "review.a_minus_plan",
      "path": "docs/review-analysis/archive/A_MINUS_ACHIEVEMENT_PLAN.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "planning",
        "grading"
      ]
    },
    {
      "id": "review.k6_coverage",
      "path": "docs/review-analysis/archive/K6_TEST_COVERAGE_ANALYSIS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "testing",
        "k6"
      ]
    },
    {
      "id": "review.code_changes_analysis",
      "path": "docs/review-analysis/archive/CODE_CHANGES_ANALYSIS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "debugging"
      ]
    },
    {
      "id": "review.fresh_chat_prompts",
      "path": "docs/review-analysis/archive/FRESH_CHAT_VERIFICATION_PROMPTS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "debugging"
      ]
    },
    {
      "id": "review.poll_debugging_protocol",
      "path": "docs/review-analysis/archive/POLL_SUBMISSION_DEBUGGING_PROTOCOL.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "debugging"
      ]
    },
    {
      "id": "review.todays_changes",
      "path": "docs/review-analysis/archive/TODAYS_CHANGES_REVIEW.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "debugging"
      ]
    },
    {
      "id": "review.verification_analysis",
      "path": "docs/review-analysis/archive/VERIFICATION_RESULTS_ANALYSIS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "debugging"
      ]
    },
    {
      "id": "review.supabase_security_nov",
      "path": "docs/review-analysis/archive/SUPABASE_SECURITY_WARNINGS.md",
      "lifecycle": "HISTORICAL",
      "domain_tags": [
        "history",
        "security"
      ]
    }
  ],
  "section_catalog": {
    "pcg.actual_db_structure": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "üìä **ACTUAL Database Structure (Based on CSV Analysis)**"
    },
    "pcg.three_separate_systems": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Three Completely Separate Poll Systems**"
    },
    "pcg.single_choice_system": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**1. Single-Choice Polls System**"
    },
    "pcg.ranking_system": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**2. Ranking Polls System**"
    },
    "pcg.wordcloud_system": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**3. Wordcloud Polls System** ‚úÖ **COMPLETED (2025)**"
    },
    "pcg.system_architecture": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "üèóÔ∏è **System Architecture**"
    },
    "pcg.critical_data_flow": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Critical Data Flow Understanding**"
    },
    "pcg.question_matching_logic": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Question Matching Logic**"
    },
    "pcg.vote_counting_differences": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Vote Counting Differences**"
    },
    "pcg.key_system_rules": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "üéØ **Key System Rules**"
    },
    "pcg.never_mix_poll_types": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**1. Never Mix Poll Types**"
    },
    "pcg.question_synchronization": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**2. Question Synchronization**"
    },
    "pcg.vote_storage_rules": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**3. Vote Storage Rules**"
    },
    "pcg.results_view_usage": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**4. Results View Usage**"
    },
    "pcg.verification_queries": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "üìä **Verification Queries**"
    },
    "pcg.check_current_poll_state": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Check Current Poll State**"
    },
    "pcg.check_vote_counts": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Check Vote Counts**"
    },
    "pcg.wordcloud_critical": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "üö® **CRITICAL: Wordcloud System Implementation (2025)**"
    },
    "pcg.wordcloud_div0": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Division by Zero Protection**"
    },
    "pcg.k6_enhancements": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "üß™ **K6 Testing System Enhancements (2025)**"
    },
    "pcg.k6_user_id_fix": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**K6 Test User ID Generation Fix**"
    },
    "pcg.critical_api_behavior": {
      "path": "docs/poll-system/POLL_SYSTEM_COMPLETE_GUIDE.md",
      "heading_text_exact": "**Critical API Behavior Understanding**"
    },
    "sup.pre_update_checklist": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "üìã **Pre-Update Checklist**"
    },
    "sup.verify_current_state": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**1. Verify Current System State**"
    },
    "sup.backup": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**2. Create Comprehensive Backup**"
    },
    "sup.update_by_type": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "üîÑ **Update Protocol by Poll Type**"
    },
    "sup.single_choice_section": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**Single-Choice Polls (`polls` table)**"
    },
    "sup.ranking_section": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**Ranking Polls (`ranking_polls` table)**"
    },
    "sup.wordcloud_section": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**Wordcloud Polls (`wordcloud_polls` table)**"
    },
    "sup.three_way_sync": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "üéØ **Three-Way Synchronization Requirements**"
    },
    "sup.critical_rule_three_places": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**Critical Rule: Every poll must exist in THREE places with identical content**"
    },
    "sup.admin_matching_logic": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**Admin Panel Question Matching Logic**"
    },
    "sup.emergency_rollback": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "üö® **Emergency Rollback Procedure**"
    },
    "sup.question_text_protocol": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "üö® **CRITICAL: Question Text Update Protocol (ENHANCED)**"
    },
    "sup.question_text_sync_requirements": {
      "path": "docs/poll-system/SAFE_POLL_UPDATE_PROTOCOL.md",
      "heading_text_exact": "**Question Text Synchronization Requirements**"
    },
    "dbg.cew_multiple_submissions": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "üö® CRITICAL: CEW Poll Multiple Submissions (2025)"
    },
    "dbg.cew_behavior_requirements": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**CEW Poll Behavior Requirements (CRITICAL)**"
    },
    "dbg.wordcloud_div0": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "üö® CRITICAL: Wordcloud Division by Zero Error (2025)"
    },
    "dbg.wordcloud_results_div0": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**Wordcloud Results View Division by Zero (NEW ISSUE)**"
    },
    "dbg.security_invoker": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**Supabase Security Invoker Warning (RECURRING ISSUE)**"
    },
    "dbg.ranking_indexing_bug": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**Ranking Results View Array Indexing Bug (RECURRING ISSUE)**"
    },
    "dbg.ranking_indexing_critical": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "7. Ranking Results View Array Indexing (CRITICAL)"
    },
    "dbg.user_type_detection": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**API User Type Detection Logic (RESOLVED)**"
    },
    "dbg.missing_rls_delete_policy": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**Missing RLS DELETE Policy Issue (RESOLVED)**"
    },
    "dbg.poll_question_option_updates": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "üö® CRITICAL: Poll Question & Option Updates (2025)"
    },
    "dbg.mandatory_update_protocol": {
      "path": "docs/poll-system/POLL_SYSTEM_DEBUGGING_GUIDE.md",
      "heading_text_exact": "**MANDATORY PROTOCOL FOR UPDATING POLL QUESTIONS**"
    }
  },
  "bundles": {
    "API_GATE": {
      "description": "Triggered by any API route change; lightweight required-doc set.",
      "triggers": [
        "src/app/api/**"
      ],
      "requires_documents": [
        {
          "doc_id": "docs.index",
          "why": "Canonical navigation + gate rules."
        },
        {
          "doc_id": "core.agents",
          "why": "Core safety rules; prevents known high-cost mistakes."
        }
      ]
    },
    "POLLING_GATE": {
      "description": "Triggered by poll-adjacent changes; heavyweight; must review all three poll systems every time.",
      "includes": [
        "API_GATE"
      ],
      "triggers": [
        "src/app/api/polls/**",
        "src/app/api/ranking-polls/**",
        "src/app/api/wordcloud-polls/**",
        "src/app/(dashboard)/admin/poll-results/**",
        "src/app/**/survey-results/**",
        "src/app/cew-polls/**",
        "src/components/PollWithResults.tsx",
        "src/components/dashboard/RankingPoll.tsx",
        "src/components/dashboard/WordCloudPoll.tsx",
        "src/app/api/graphs/prioritization-matrix/**"
      ],
      "requires_sections": [
        "pcg.actual_db_structure",
        "pcg.three_separate_systems",
        "pcg.single_choice_system",
        "pcg.ranking_system",
        "pcg.wordcloud_system",
        "pcg.system_architecture",
        "pcg.critical_data_flow",
        "pcg.question_matching_logic",
        "pcg.vote_counting_differences",
        "pcg.key_system_rules",
        "pcg.never_mix_poll_types",
        "pcg.question_synchronization",
        "pcg.vote_storage_rules",
        "pcg.results_view_usage",
        "pcg.verification_queries",
        "pcg.check_current_poll_state",
        "pcg.check_vote_counts",
        "pcg.wordcloud_critical",
        "pcg.wordcloud_div0",
        "pcg.k6_enhancements",
        "pcg.k6_user_id_fix",
        "pcg.critical_api_behavior",
        "sup.pre_update_checklist",
        "sup.verify_current_state",
        "sup.backup",
        "sup.update_by_type",
        "sup.single_choice_section",
        "sup.ranking_section",
        "sup.wordcloud_section",
        "sup.three_way_sync",
        "sup.critical_rule_three_places",
        "sup.admin_matching_logic",
        "sup.emergency_rollback",
        "sup.question_text_protocol",
        "sup.question_text_sync_requirements",
        "dbg.cew_multiple_submissions",
        "dbg.cew_behavior_requirements",
        "dbg.wordcloud_div0",
        "dbg.wordcloud_results_div0",
        "dbg.security_invoker",
        "dbg.ranking_indexing_bug",
        "dbg.ranking_indexing_critical",
        "dbg.user_type_detection",
        "dbg.missing_rls_delete_policy",
        "dbg.poll_question_option_updates",
        "dbg.mandatory_update_protocol"
      ]
    }
  }
}
